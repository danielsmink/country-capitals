{"version":3,"file":"country-capitals.min.js","sources":["country-capitals.config.js","country-capitals.module.js","country-capitals.routes.js","countries/countries.ctrl.js","country-detail/country-detail.ctrl.js","data/country-capitals.cache.js","data/country-capitals.svc.js"],"names":[],"mappings":"AAAA,YCWA,SAAA,QAAA,GACA,EACA,KAAA,KACA,YAAA,iCAEA,KAAA,cACA,YAAA,yCACA,WAAA,gBACA,aAAA,cAEA,KAAA,uBACA,YAAA,mDACA,WAAA,oBACA,aAAA,YAEA,KAAA,UACA,SAAA,gCAEA,WACA,WAAA,WCrBA,QAAA,eAAA,EAAA,EAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,IAAA,YAEA,GAAA,SAAA,cAEA,EAAA,GAAA,SAAA,EAAA,GACA,EAAA,WAAA,GACA,EAAA,KAAA,IAIA,EACA,EAAA,SAAA,EAEA,EAAA,eACA,QAAA,SAAA,GACA,EAAA,IAAA,YAAA,EAAA,UACA,EAAA,SAAA,EAAA,IAAA,eAEA,MAAA,WACA,EAAA,MAAA,kCCrBA,QAAA,mBAAA,EAAA,EAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,QACA,EAAA,EAAA,QACA,EAAA,EAAA,IAAA,EAGA,GACA,EAAA,OAAA,EAEA,EAAA,WAAA,GACA,QAAA,SAAA,GACA,IAAA,EAAA,SAAA,OACA,EAAA,MAAA,4BAEA,EAAA,IAAA,EAAA,EAAA,SAAA,IACA,EAAA,OAAA,EAAA,IAAA,MAGA,MAAA,WACA,EAAA,MAAA,kCCnBA,QAAA,eAAA,GACA,MAAA,GAAA,MCDA,QAAA,iBAAA,EAAA,EAAA,GAUA,QAAA,KAGA,MAAA,IAEA,OAAA,QACA,IAAA,EAAA,mBACA,QACA,SAAA,gBACA,SAAA,KAMA,QAAA,GAAA,GAGA,MAAA,IAEA,OAAA,QACA,IAAA,EAAA,cACA,QACA,SAAA,gBACA,SAAA,EACA,EAAA,EACA,QAAA,EAAA,QACA,YAAA,EACA,gBAAA,KAMA,QAAA,GAAA,GACA,EAAA,QAAA,EA3CA,GAAA,GAAA,GACA,GACA,aAAA,EACA,WAAA,EACA,QAAA,EACA,WAAA,EAyCA,OAAA,GLrDA,QACA,OAAA,6BACA,SAAA,iBAAA,eACA,SAAA,aAAA,4BMNA,QACA,OAAA,mBAAA,UAAA,2BLGA,QACA,OAAA,mBACA,OAAA,0CCHA,QACA,OAAA,gBAAA,qFCDA,QACA,OAAA,oBAAA,gGCDA,QACA,OAAA,mBACA,QAAA,gBAAA,uDCFA,QACA,OAAA,mBACA,QAAA,kBAAA","sourcesContent":["'use strict';\n\n/*\n * Contains constants used throughout the application\n */\nangular\n  .module('countryCapitals.config', [])\n  .constant('geoApiUsername', 'danielsmink')\n  .constant('apiBaseUrl', 'http://api.geonames.org/');\n","'use strict';\n\nangular\n  .module('countryCapitals', ['ngRoute', 'countryCapitals.config']);\n","'use strict';\n\n/*\n * Route configuration\n */\n\nangular\n  .module('countryCapitals')\n  .config(config);\n\n/* @ngInject */\nfunction config ($routeProvider) {\n  $routeProvider\n    .when('/', {\n      templateUrl: './js/partials/home/home.html'\n    })\n    .when('/countries', {\n      templateUrl: './js/partials/countries/countries.html',\n      controller: 'CountriesCtrl',\n      controllerAs: 'countries'\n    })\n    .when('/countries/:country', {\n      templateUrl: './js/partials/country-detail/country-detail.html',\n      controller: 'CountryDetailCtrl',\n      controllerAs: 'country'\n    })\n    .when('/error', {\n      template : '<p>Error Page Not Found</p>'\n    })\n    .otherwise({\n      redirectTo : '/error'\n    });\n}","'use strict';\n\n/*\n * Countries controller\n */\nangular\n  .module('CountriesCtrl', CountriesCtrl);\n\n/* @ngInject */\nfunction CountriesCtrl ($location, geonamesService, geonamesCache) {\n  var countries = this,\n    cache = geonamesCache.get('countries');\n\n  countries.ordering = 'countryName';\n\n  countries.go = function (path, isoCode) {\n    geonamesService.setIsoCode(isoCode);\n    $location.path(path);\n  };\n\n  // Use cache if the country list is already cached\n  if (cache) {\n    countries.geonames = cache;\n  } else {\n    geonamesService.getCountries()\n      .success(function (geonames) {\n        geonamesCache.put('countries', geonames.geonames);\n        countries.geonames = geonamesCache.get('countries');\n      })\n      .error(function () {\n        countries.error = 'Error retrieving country list';\n      });\n  }\n}\n","'use strict';\n\n/*\n * Country detail controller\n */\nangular\n  .module('CountryDetailCtrl', CountryDetailCtrl);\n\n/* @ngInject */\nfunction CountryDetailCtrl ($routeParams, geonamesService, geonamesCache) {\n  var country = this,\n    countryName = $routeParams.country,\n    countryCode = geonamesService.isoCode,\n    cache = geonamesCache.get(countryCode);\n\n  // Use cache if the country is already cached\n  if (cache) {\n    country.detail = cache;\n  } else {\n    geonamesService.getCountry(countryName)\n      .success(function (detail) {\n        if(detail.geonames.length === 0) {\n          country.error = 'Error retrieving country';\n        } else {\n          geonamesCache.put(countryCode, detail.geonames[0]);\n          country.detail = geonamesCache.get(countryCode);\n        }\n      })\n      .error(function () {\n        country.error = 'Error retrieving country list';\n      });\n  }\n\n}","'use strict';\n\n/*\n * Contains a service to communicate with the Geonames API\n */\nangular\n  .module('countryCapitals')\n  .factory('geonamesCache', geonamesCache);\n\n/* @ngInject */\nfunction geonamesCache ($cacheFactory) {\n  return $cacheFactory(name);\n}","'use strict';\n\n/*\n * Contains a service to communicate with the Geonames API\n */\nangular\n  .module('countryCapitals')\n  .factory('geonamesService', geonamesService);\n\n/* @ngInject */\nfunction geonamesService ($http, geoApiUsername, apiBaseUrl) {\n\n  var isoCode = '',\n    service = {\n    getCountries: getCountries,\n    getCountry: getCountry,\n    isoCode: isoCode,\n    setIsoCode: setIsoCode\n  };\n\n  function getCountries () {\n\n    // return Promise\n    return $http(\n      {\n        method: 'JSONP',\n        url: apiBaseUrl + '/countryInfoJSON',\n        params: {\n          callback: 'JSON_CALLBACK',\n          username: geoApiUsername\n        }\n      }\n    );\n  }\n\n  function getCountry (countryName) {\n\n    // return Promise\n    return $http(\n      {\n        method: 'JSONP',\n        url: apiBaseUrl + '/searchJSON',\n        params: {\n          callback: 'JSON_CALLBACK',\n          username: geoApiUsername,\n          q: countryName,\n          country: service.isoCode,\n          name_equals: countryName,\n          isNameRequired: true\n        }\n      }\n    );\n  }\n\n  function setIsoCode (isoCode) {\n    service.isoCode = isoCode;\n  }\n\n  return service;\n}"],"sourceRoot":"/source/"}